name: GPT-CMD Processor          # ← restores friendly name in sidebar

on:
  workflow_dispatch:            # ← REQUIRED for “Run workflow” button
    inputs:
      directives:
        description: 'JSON directives to apply (must be valid JSON)'
        required: true

jobs:
  execute:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Run GPT-CMD parser
        shell: bash
        run: |
          # printf avoids the quoting problems that echo caused
          printf '%s' "${{ github.event.inputs.directives }}" | python3 scripts/parse_gpt_cmd.py
